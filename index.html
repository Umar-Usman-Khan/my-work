<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="How to Build Soot : Importing and building soot step by step" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>How to Build Soot</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Umar-Usman-Khan/my-work">View on GitHub</a>

          <h1 id="project_title">How to Build Soot</h1>
          <h2 id="project_tagline">Importing and building soot step by step</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Umar-Usman-Khan/my-work/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Umar-Usman-Khan/my-work/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>How to Build and Run Soot
Soot is a Java byte code analysis and transformation framework. It provides a Java API for building intermediate representations (IRs), analyses and transformations; also it supports class file annotation. Recently it has been extended to further support the analysis and transformation of Dalvik/Android bytecode.
i.  Soot using Eclipse Plug-in:
User’s always want simple interfaces and development platform for their development work. The Soot - Eclipse Plug-in integrates Soot (a Java optimization framework) with Eclipse, allowing the user’s to:
 optimize class files automatically and use more advanced optimization options
 import class files and decompile them using the Dava decompiler
 use a Jimple editor with syntax highlighting
 view attribute information at source and IR levels
 develop analyses with an interactive control flow graph
This plug-in works with the Eclipse official release 3.3 (tested on 3.3.2) and should run in any of the later releases.
ii. Step by Step Instruction for Integrating Soot with Eclipse:
To Integrate SOOT with eclipse follow the simple steps given below
Within Eclipse Select:
 Step1:  Select Help -&gt;  Software Updates (install new software) -&gt; Find and Install 
Step2:   Select Search for new features to install -&gt; Next -&gt;  New Remote Site 
Step3:  Give the update site a name and use this site for the URL:<br>
               [<a href="http://www.sable.mcgill.ca/soot/eclipse/updates/">http://www.sable.mcgill.ca/soot/eclipse/updates/</a>]
               and please do not forget the trailing slash. </p>

<p>Step4:  Select: OK -&gt; Finish </p>

<p>Step5: Expand the list in the Select features to install box. Check: Soot - Eclipse Plug- 
               in -&gt; Next and accept the license agreement and press: Next -&gt; Finish installing<br>
              the plug-in. At this time the jars will download. You may be asked to accept the 
              unsigned jars. Press: Install and the plug-in will be installed and you will be<br>
              asked to restart Eclipse. Press: Yes as this is usually necessary.
NOTE:
Select the Soot plug-in form the list. If eclipse complains that it cannot find Draw2D or GEF, then also select Graphical Editors and Frameworks from the Eclipse Discovery Site </p>

<p>Once Eclipse has restarted the Soot - Eclipse plug-in will be available for use within Eclipse. 
iii.    Working with Soot-eclipse Plug-in:
Setting up a project so that Soot can work with it, an eclipse project should have a structure as shown on the right, where source files reside in source folders like “src” and class files go into a dedicated “bin” folder. Soot will automatically regard the project’s source path and class paths.</p>

<p>Transforming files between different (intermediate) representations
The eclipse plug-in makes it easy to convert Java source files or bytecode files into the ‘Jimple’ or ‘Grimp’ intermediate representations, and even to convert back from those representations into source code or bytecode. Simply right-click on the .java files and then select the appropriate option for intermediate representation of your choice as shown in the figure.</p>

<p>SootOutput
Soot places the generated files into a folder “sootOutput” in the current directory. It also shows its progress in a console view. </p>

<p>Displaying the results of a data-flow analysis
Soot can display the results of a data-flow analysis using three different kinds of tags:
 String Tag : Shows a string when you hover over the tag with your mouse
 Color Tag: Highlights the tagged Stmt or Value with a color
 Link Tag:  Lets you jump from the tagged Stmt or Value to the line of another Stmt by clicking  on the source Stmt or Value
Soot displays these tags right in line with the generated code and with the source code. For instance right-click the Testclass and select Process Source File –&gt; Run Soot…. Now select Output Options and select Jimple. Under Phase Options/Jimple Annotation Pack activate the Reaching Defs Tagger and click Run. If you now re-open Testclass.java then you should see something like shown on the right-hand side. If you like, you can add all kinds of tags in your own analysis. You can add tags to anything that implements the Host interface.</p>

<p>Extending Soot (by Example)
Extending Soot is easy and by using the plug-in we even provide concrete examples within Eclipse. Click File -&gt; New -&gt; Example and select one of the examples, e.g. A simple BodyTransformer. 
Soot will create a new Java project to host the example. Enter all necessary information for the project.
Eclipse will then automatically show the example file.</p>

<p>Note that the file accesses types like PackManager which are part of the Soot library. How does the project get access to that library? The Soot plug-in automatically provides the build path variable SOOTCLASSES that points to soot’s library. For example projects, this variable is added automatically. If you want to extend Soot without using an example project you can just add the variable by yourself. (Right-click on your project and select BuildPath)
Assume now that we want to apply our new BodyTransformer to the Testclass class, as before. Again, right-click on Testclass.java and select, as before:
Soot -&gt; Process Source File -&gt; Run Soot
Only this time select the Soot Main Class tab and set the values as shown in the Figure. This advises the plug-in to start Soot by calling My Main in project MyBodyTranformer. The console view will now show that the customized BodyTransformer executed.</p>

<p>iv. Developing with Soot in Eclipse
Create Projects, Import Sources, Recognize Sources, Setup Libraries, Building, Running
Step 1: Checking out Soot from SVN
Start Eclipse -&gt; Select File -&gt; Import  Checkout Projects from SVN -&gt; Click Next -&gt; Select Create a new Repository Location -&gt; Click Next -&gt; Enter <a href="https://svn.sable.mcgill.ca/soot/soot/trunk/">https://svn.sable.mcgill.ca/soot/soot/trunk/</a>   -&gt; Select the root directory and hit Finish.
You should now have a project containing Soot, but it will still have build errors. This is because Soot depends on other JAR files that you still need to check out.
Step 2: Checking out Soot's dependencies
Select File -- Import -- Checkout Projects from SVN -&gt; Click Next -&gt; Select Create a new Repository Location -&gt; Click Next -&gt; Enter <a href="https://svn.sable.mcgill.ca/abc/trunk/aop/libs/">https://svn.sable.mcgill.ca/abc/trunk/aop/libs/</a>  -&gt; Select the root directory and hit Finish
You should now have a new project "libs" that contains a bunch of JAR files. The Soot project should now build. To run Soot, simply right-click the class soot. Main and select Run As -&gt; Java Application. You may also want to look at the build.xml file to see how Soot is built outside of eclipse.
v.  Building Soot with IntelliJ IDEA   (Contributed by Konrad Jamrozik)
Step1: Download IntelliJ IDEA from <a href="http://www.jetbrains.com/idea/download/">http://www.jetbrains.com/idea/download/</a>
Step2: Go to import project and select your .project file and click OK.
Step3: Check the box with ‘keep project and module file in’ and ‘project format as ‘.idea
Note: Because we are keeping the project files in .idea dir, all of them will be ignored     with ".idea" line in .gitignore</p>

<pre><code>  Step4: Uncheck all projects except Soot. The unchecked projects are related to eclipse plug-in.
               Note: Build path will be broken. Java SDK probably won't be recognized and some jars          
                might be missing.

  Step5: Change the module's dependencies storage format to IntelliJ IDEA, so you won't   
                modify the .classpath file
                You can easily fix the SDK by resetting it. So for this
 Step6: Go to view and open module settings and Dependencies tab and select your Java version

 Step7: Download the missing jars: 
             heros.jar and jasminclasses.jar,  which are available from                  
             http://vandyk.st.informatik.tu-darmstadt.de/abc/           

              ant.jar is available e.g. at 
              http://mvnrepository.com/artifact/org.apache.ant/ant/1.9.2

               Now Put these files in ./libs_intellij so they are picked up by .gitignore
               The final dependencies should resemble
</code></pre>

<p>Step8: Now create Run configuration by going to Run -&gt; edit configuration</p>

<pre><code>          You have successfully import and Build soot. You can run and observe now.
</code></pre>

<p>vi. Soot Projects And Source Control
If you are modifying Soot you should be using Subversion!
What to do:
Checkout a working copy of Soot using, 
svn co <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> $your_soot_working_directory
You should work on the trunk if your work is relatively localized. (ie: if you work mainly on one IR)
You should check in your work, after doing an svn up, very often. (ie once a week) This allows other people to help test your work and prevents potential conflicts.
If you feel your work is not localized you can work in a branch:
Make a new branch,
svn cp <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> <a href="https://svn.sable.mcgill.ca/soot/soot/branches/%24your_project">https://svn.sable.mcgill.ca/soot/soot/branches/$your_project</a>
Checkout a working copy of the branch,
svn co <a href="https://svn.sable.mcgill.ca/soot/soot/branches/%24your_project">https://svn.sable.mcgill.ca/soot/soot/branches/$your_project</a> $your_project_working_directory
To merge changes from the trunk into your branch,
svn merge <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> $your_project_working_directory $your_project_working_directory
To merge changes from your branch into the trunk,
svn merge $your_project_working_directory <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a>
What not to do:
You should not download a released version or nightly build in a jar file and start editing.
The only time you should use a downloaded Soot jar is if you are making an extension to Soot with your own main and you do not change the Soot source at all..
Soot Release How to:
Email recent Soot contributors and ask them to add their changes to subversion and update the CHANGES file
Ensure everything is checked into subversion.
Ensure that you have the latest versions of JastAdd? etc. checked out.
• run "ant veryclean-jastadd jastadd" to make sure that the Jast-Add based files are up to date
• check in these files if they changed (in the "generated" directory)
Potentially do the same for the Jimple parser definition (use sablecc), and aso re-generate the options parser to make sure it's up to date.
Change soot.Main,
• fix up dates in printed copyright statement
Change ant.settings for Soot and Jasmin, entering the correct version number
Change the soot_download.html file
• increment release number
• change the little paragraph blurb to reflect release numbers
• change all href entries to correct release numbers
• make a new entry for older releases with the most release being replaced
Change the index.html file
• latest version number and update release date
• update release status notes
• update downloads section to reflect new version number
• update the last updated date
Ensure CHANGES file, credits file, Release_Notice file are up-to-date
Ideally ensure Jasmin README and changes file are also up-to-date although they are currently hopelessly out of date
Checkin changes once all Soot contributors respond that they are set to go (or when you get tired of waiting for responses)
Build all jars
• there is a script to do this called nightly (it is also used for nightly Soot builds)
• this script requires some setup
o   make an autobuild directory (the script assumes it is in your $HOME directory but you can change the script locally to have it somewhere else)
o   adjust "rev" and "polyglotrev" variables
o   in the autobuild directory you need directories settings, resources and releases
 in the settings directory you need a soot file and a jasmin file (these files contain the ant.settings required by the build.xml script except they some variables that get set automatically by the build script)
 in the resources directory you need the stable polyglot directory of the polyglot you will be releasing with Soot
 the releases directory is where all the jars are put when they are built by the build script
You have to use SVN to modify the Soot website:  <a href="https://svn.sable.mcgill.ca/soot/website/">https://svn.sable.mcgill.ca/soot/website/</a>
You have to put all JAR files into:  <a href="https://svn.sable.mcgill.ca/www/sable/public_html/software/">https://svn.sable.mcgill.ca/www/sable/public_html/software/</a>
Put the new jars in the sable/public_html/software/ directory.
Place the updated html files in the sable/public_html/soot/. Also put the updated credit and CHANGES files there.
Build the Soot docs and update them in sable/public_html/soot/doc/ directory. There is a script that makes the javadoc search applet that needs to be run. It can be found here.
Also copy a built version of the tutorials into sable/public_html/soot/tutorial/ directory.</p>

<p>To build the eclipse plugin:
check out the folder  <a href="https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse">https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse</a>
• start eclipse with a fresh workspace and import all projects from the folder you just checked out
• In the eclipse workspace move to folder ca.mcgill.sable.lib/lib and copy the following files into this folder:
o   jasminclasses.jar
o   java_cup.jar
o   polyglot.jar
o   sootsrc.zip
• Update the version number in all plugin.xml and feature.xml files in all projects and in site.xml of the update site project.
• Open site.xml in project ca.mcgill.sable.soot.updatesite (with a double click) and click "build all". This should produce a number of jar files in the project.
• Upload the entire project folder to  <a href="http://www.sable.mcgill.ca/soot/eclipse/updates/">http://www.sable.mcgill.ca/soot/eclipse/updates/</a>
Check all links on Soot webpage
Tag the releases in subversion:
svn copy  <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/soot/releases/soot-">https://svn.sable.mcgill.ca/soot/soot/releases/soot-</a> -m "Tagging the  release of the Soot project."
svn copy  <a href="https://svn.sable.mcgill.ca/soot/jasmin/trunk">https://svn.sable.mcgill.ca/soot/jasmin/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-">https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-</a> -m "Tagging the  release of the Jasmin project."
svn copy  <a href="https://svn.sable.mcgill.ca/soot/website/trunk">https://svn.sable.mcgill.ca/soot/website/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/website/releases/soot-">https://svn.sable.mcgill.ca/soot/website/releases/soot-</a> -m "Tagging the  release of the Soot project."</p>

<p>vii.    Testing Soot<br>
           We test Soot nightly, by building and running a few tools that use Soot internally:
• Clara is a special-purpose analysis tool built on top of the AspectBench Compiler
• The AspectBench Compiler is an open AspectJ compiler that uses Soot internally for weaving
Running Self Tests:
To run the tests yourself, e.g., to test whether a Patch works, please proceed as follows:
Check out and build Clara and all its dependencies. This is fairly automated, for instructions see here: <a href="http://www.bodden.de/clara/downloads/">http://www.bodden.de/clara/downloads/</a>
Then execute the ant script in the directory "build". Ant test-and-email will run all tests and results will be emailed to you.
If tests fail, you will see the output in abc-testing/ajc-harness/tests/ failed.output. There are some tests that fail regularly. You can find the current listing here:
Running test 53: 
new/handle multiple nested inner classes Commandline: abc -d new -warn-unused-advice:off new/InnerHell?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at new/InnerHell?.java:12,4-13:5: No valid constructor found for javax.swing.JComponent.AccessibleJComponent(). FAIL: Test 53: "new/handle multiple nested inner classes" failed in 612ms, memory usage: 17787496.
Running test 115: 
new/Not binding constructor when using more than one compilation Commandline: abc -d new -warn-unused-advice:off new/OuterAbstract?_PR408.java Commandline: abc -cp new:../../../clara/lib/clara-complete.jar:../../../abc/lib/abc-testing.jar -d new -warn-unused-advice:off new/ExtendsOuterAbstract?_PR408.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at new/ExtendsOuterAbstract?_PR408.java:4,8-21: Could not find type "InnerAbstract?". FAIL: Test 115: "new/Not binding constructor when using more than one compilation" failed in 1018ms, memory usage: 17848384.
Running test 165: 
pureJava/nameConflicts/type and package name conflicts caught as errors (1) Commandline: abc -d pureJava/nameConflicts -warn-unused-advice:off pureJava/nameConflicts/p1/p2.java pureJava/nameConflicts/p1/Main1.java pureJava/nameConflicts/p1/Foo.java pureJava/nameConflicts/p1/p2/Foo.java Compilation succeeded but was expected to fail. FAIL: Test 165: "pureJava/nameConflicts/type and package name conflicts caught as errors (1)" failed in 669ms, memory usage: 20986784.
Running test 178: 
pureJava/nested finally blocks have interesting frame location problems Commandline: abc -d pureJava -warn-unused-advice:off pureJava/NestedFinally?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at pureJava/NestedFinally?.java:5,18-35: Missing return statement. FAIL: Test 178: "pureJava/nested finally blocks have interesting frame location problems" failed in 548ms, memory usage: 8225592.
Running test 190: 
pureJava/interfaces with non-explicitly static inner classes Commandline: abc -d pureJava -warn-unused-advice:off pureJava/InterfaceAndInnerHelper?.java Commandline: abc -cp pureJava:../../../clara/lib/clara-complete.jar:../../../abc/lib/abc-testing.jar -d pureJava -warn-unused-advice:off pureJava/InterfaceAndInner?.java Compilation produced an unexpected number of errors: 2, should be 0 Actual errors found: Semantic Error at pureJava/InterfaceAndInner?.java:7,23-48: Class "C" not found in scope of InterfaceAndInnerHelper? Semantic Error at pureJava/InterfaceAndInner?.java:8,34-59: Class "C" not found in scope of InterfaceAndInnerHelper? FAIL: Test 190: "pureJava/interfaces with non-explicitly static inner classes" failed in 979ms, memory usage: 15711080.
Running test 440:
 new/around advice on calls within inner classes (including protected method calls) 1 Commandline: abc -d new -warn-unused-advice:off new/AroundInnerCalls13.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... Outer.foo() calls Outer.Inner.mi() <a href="mailto:Outer@31c7ac55.foo">Outer@31c7ac55.foo</a> calls Outer$<a href="mailto:Inner@2c0319fb.mi">Inner@2c0319fb.mi</a> Outer.Inner.mi() calls PrintStream?.println(..) Outer$<a href="mailto:Inner@2c0319fb.mi">Inner@2c0319fb.mi</a> calls java.io.PrintStream?@7f9ec44f.println . Outer.foo() calls Outer.InnerRandom?.nextHook(..) <a href="mailto:Outer@31c7ac55.foo">Outer@31c7ac55.foo</a> calls Outer$InnerRandom?@20111326.nextHook Outer.InnerRandom?.nextHook(..) calls Outer.InnerRandom?.next(..) Outer$InnerRandom?@20111326.nextHook calls Outer$InnerRandom?@20111326.next Outer.foo() calls Outer.1.nextInt(..) <a href="mailto:Outer@31c7ac55.foo">Outer@31c7ac55.foo</a> calls X.nextInt Test failed, compiled class behaved incorrectly Message: fail expected note "Outer.InnerRandom?.nextHook(..) calls Random.next(..)" org.aspectj.bridge.AbortException?: expected note "Outer.InnerRandom?.nextHook(..) calls Random.next(..)"
at org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.check(Tester.java:145) at org.aspectj.testing.Tester.check(Tester.java:133) at AroundInnerCalls13.shadow$7(AroundInnerCalls13.java:7) at A.inline$1$around$942(AroundInnerCalls13.java:41) at AroundInnerCalls13.main(AroundInnerCalls13.java:5) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
FAIL: Test 440: 
"new/around advice on calls within inner classes (including protected method calls) 1" failed in 2182ms, memory usage: 15129632.
Running test 496: new/elaborated into testing of around on all join points Commandline: abc -d new -warn-unused-advice:off new/AroundAll?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... Test failed, compiled class behaved incorrectly Message: fail steps expected array of length 114 got 132 org.aspectj.bridge.AbortException?: steps expected array of length 114 got 132
at org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.checkEqual(Tester.java:228) at A.checkLog(AroundAll?.java:176) at AroundAll?.shadow$8(AroundAll?.java:9) at A.inline$21$around$1600(AroundAll?.java:199) at AroundAll?.main(AroundAll?.java:198) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
FAIL: Test 496: 
"new/elaborated into testing of around on all join points" failed in 2510ms, memory usage: 14537456.
Running test 555:
 new/accessing protected superclass members in and outside CCC from body of method introduction Commandline: abc -d new -warn-unused-advice:off new/SuperInIntroduction?.java InvocationTargetException? while trying to run compiled class: java.lang.VerifyError?: (class: A, method: getClone signature: (LObjectSub;)LObjectSub;) Bad access to protected data java.lang.reflect.InvocationTargetException?
at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
Caused by: java.lang.VerifyError?: (class: A, method: getClone signature: (LObjectSub;)LObjectSub;) Bad access to protected data
at Sub.getInt(SuperInIntroduction?.java) at SuperInIntroduction?.main(SuperInIntroduction?.java:6) ... 7 more
FAIL: Test 555: 
"new/accessing protected superclass members in and outside CCC from body of method introduction" failed in 1785ms, memory usage: 12630656.
Running test 64301: 
abctests/new/type pattern matching for inner classes (from Ken Horn) Commandline: abc -d abctests/new -warn-unused-advice:off abctests/new/test/TypePat?.java Test failed, compiled class behaved incorrectly Message: fail expected event "A.before2: C.foo()" not found? org.aspectj.bridge.AbortException?: expected event "A.before2: C.foo()" not found?
at org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.checkEqualIgnoreDups(Tester.java:702) at org.aspectj.testing.Tester.checkEqual(Tester.java:742) at org.aspectj.testing.Tester.checkEvents(Tester.java:922) at org.aspectj.testing.Tester.checkAndClearEvents(Tester.java:933) at test.TypePat?.main(TypePat?.java:42) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
FAIL: Test 64301:
 "abctests/new/type pattern matching for inner classes (from Ken Horn)" failed in 2028ms, memory usage: 14051440.
Running test 740:
 new/PR862/import any inner from interface implementor Commandline: abc -d new/PR862 -warn-unused-advice:off new/PR862/pack/ImportInnerFromInterfaceImplementor?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/PR862/pack/ImportInnerFromInterfaceImplementor?.class not found, skipping... Failed to find class pack.ImportInnerFromInterfaceImplementor? FAIL: Test 740: "new/PR862/import any inner from interface implementor" failed in 615ms, memory usage: 19799592.
Running test 752: 
bugs/problems with finalize call Commandline: abc -d bugs -warn-unused-advice:off bugs/Finalizer.java Compilation succeeded but was expected to fail. FAIL: Test 752: "bugs/problems with finalize call" failed in 652ms, memory usage: 18861512.
Running test 769: 
new/illegal name binding in around cflow Commandline: abc -d new -warn-unused-advice:off new/ArgsInCflowCf?.java Compilation succeeded but was expected to fail. FAIL: Test 769: "new/illegal name binding in around cflow" failed in 769ms, memory usage: 14558080.
Running test 77201: 
abctests/bugs/declare soft and throw statements Commandline: abc -d abctests/bugs -warn-unused-advice:off abctests/bugs/ConvertToUnchecked?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at abctests/bugs/ConvertToUnchecked?.java:44,2-11: The exception java.io.IOException must be either caught or declared to be thrown FAIL: Test 77201: "abctests/bugs/declare soft and throw statements" failed in 704ms, memory usage: 21795528.
Running test 792: 
new/arrays via Class.forName() Commandline: abc -d new -warn-unused-advice:off new/ClassForName?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... execution(void ClassForName?.main(ClassNotFoundException?)) File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... InvocationTargetException? while trying to run compiled class: java.lang.ClassNotFoundException?: [Ljava.lang.String; java.lang.reflect.InvocationTargetException?
at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
Caused by: java.lang.ClassNotFoundException?: [Ljava.lang.String;
at java.lang.ClassLoader?.findClass(ClassLoader?.java:373) at abc.testing.TestCase?$FileClassLoader?.findClass(TestCase?.java:794) at java.lang.ClassLoader?.loadClass(ClassLoader?.java:321) at java.lang.ClassLoader?.loadClass(ClassLoader?.java:266) at ClassForName?.main(ClassForName?.java:9) ... 7 more
FAIL: Test 792:
 "new/arrays via Class.forName()" failed in 1156ms, memory usage: 14452424.
Running test 812: 
harness/CLE: no dir specified for sourceroots Commandline: abc -d harness -warn-unused-advice:off -sourceroots harness/ErrorTest?.java Unexpected exception while compiling: polyglot.util.InternalCompilerError?: unhandled exception during compilation polyglot.util.InternalCompilerError?: unhandled exception during compilation
at abc.main.Main.run(Main.java:454) at abc.testing.TestCase?.runTest(TestCase?.java:289) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
Caused by: java.lang.IllegalArgumentException?: Sourceroot harness/ErrorTest?.java is not a directory
at abc.main.Main.findSourcesInDir(Main.java:587) at abc.main.Main.loadSourceRoots(Main.java:604) at abc.main.Main.run(Main.java:398) ... 3 more
FAIL: Test 812: 
"harness/CLE: no dir specified for sourceroots" failed in 655ms, memory usage: 31243840.
Running test 951: 
bugs/deprecated/-deprecation not working? Commandline: abc -d bugs/deprecated -warn-unused-advice:off -deprecation bugs/deprecated/Deprecation.java bugs/deprecated/Deprecated.java Illegal arguments: Unknown option -deprecation FAIL: Test 951: "bugs/deprecated/-deprecation not working?" failed in 208ms, memory usage: 12396600.
Running test 986: 
abctests/bugs/Matching int.clone()" failed in 574ms, memory usage: 18563536.
Running test 992:
 abctests/bugs/cast pointcut can interact badly with jimple type assignment Commandline: abc -d abctests/bugs -injars abctests/bugs/cast.jar -warn-unused-advice:off -ext abc.eaj abctests/bugs/CastAspect?.java Test failed, compiled class behaved incorrectly Message: fail unexpected event "cast happened" found? org.aspectj.bridge.AbortException?: unexpected event "cast happened" found?
at org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.checkEqualIgnoreDups(Tester.java:702) at org.aspectj.testing.Tester.checkEqual(Tester.java:742) at org.aspectj.testing.Tester.checkEvents(Tester.java:922) at org.aspectj.testing.Tester.checkAndClearEvents(Tester.java:933) at org.aspectj.testing.Tester.checkAllEvents(Tester.java:846) at Cast.main(Cast.java:5) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
FAIL: Test 992:
 "abctests/bugs/cast pointcut can interact badly with jimple type assignment" failed in 2435ms, memory usage: 13731280.
Running test 1001: 
abctests/bugs/resolving anonymous classes inside classes with dollar signs Commandline: abc -d abctests/bugs -warn-unused-advice:off abctests/bugs/ExtraAnon?.java Unexpected exception while compiling: polyglot.util.InternalCompilerError?: unhandled exception during compilation polyglot.util.InternalCompilerError?: unhandled exception during compilation
at abc.main.CompileSequence?.runSequence(CompileSequence?.java:110) at abc.main.Main.run(Main.java:406) at abc.testing.TestCase?.runTest(TestCase?.java:289) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)
Caused by: java.lang.RuntimeException?: couldn't find class: E$A2$1 (is your soot-class-path set properly?)
at soot.SootResolver?.bringToHierarchy(SootResolver?.java:205) at soot.SootResolver?.bringToSignatures(SootResolver?.java:239) at soot.SootResolver?.processResolveWorklist(SootResolver?.java:154) at soot.SootResolver?.resolveClass(SootResolver?.java:124) at soot.Scene.loadClass(Scene.java:448) at abc.main.CompileSequence?.compile(CompileSequence?.java:338) at abc.main.CompileSequence?.runSequence(CompileSequence?.java:100) ... 4 more
FAIL: Test 1001:
 "abctests/bugs/resolving anonymous classes inside classes with dollar signs" failed in 695ms, memory usage: 35964696.
Running test 1032: 
abctests/tracematches/Tracematches: Testing self-applying around TM-advice Commandline: abc -d abctests/tracematches -warn-unused-advice:off -ext abc.tm abctests/tracematches/AdviseSelf?.java Compilation produced unexpected warnings:
Warning at Compiler Generated: Invalid Jimple body for 
All identity statements should occur at the start of a Jimple method.abc will try to fix this, but really it's a bug in code generation. 
FAIL: Test 1032:
 "abctests/tracematches/Tracematches: Testing self-applying around TM-advice" failed in 1122ms, memory usage: 24447656.
Running test 1208: 
abctests/bugs/inpath/Class being woven twice when using -inpath Commandline: abc -d abctests/bugs/inpath -warn-unused-advice:off File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc harness/tests/abctests/bugs/inpath/Test.class not found, skipping... Failed to find class Test FAIL: Test 1208: "abctests/bugs/inpath/Class being woven twice when using -inpath" failed in 522ms, memory usage: 14993544.
Basic Svn Commands
svn up  (update your working copy - you should do this before committing anything)
svn commit  (commit your changes)
svn add  (add new files that you've created)
svn rm  (remove files no longer needed)
svn stat  (lists all files and whether they are M - modified / A - added/ C - in conflict/ ? - status   unknown)
svn revert  (changes your local file back to whatever is in the repository)
svn log (lists changes log file)
svn resolved  (after you fix a conflict you need to use this on the file before you can commit)
Soot Projects And Source Control
If you are modifying Soot you should be using Subversion!
What to do:
Checkout a working copy of Soot using svn co <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> $your_soot_working_directory
You should work on the trunk if your work is relatively localized. (ie: if you work mainly on one IR)
You should check in your work, after doing an svn up, very often. (ie once a week) This allows other people to help test your work and prevents potential conflicts.
If you feel your work is not localized you can work in a branch:
Make a new branch:
svn cp <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> <a href="https://svn.sable.mcgill.ca/soot/soot/branches/%24your_project">https://svn.sable.mcgill.ca/soot/soot/branches/$your_project</a>
Checkout a working copy of the branch:
svn co <a href="https://svn.sable.mcgill.ca/soot/soot/branches/%24your_project">https://svn.sable.mcgill.ca/soot/soot/branches/$your_project</a> $your_project_working_directory
To merge changes from the trunk into your branch:
svn merge <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> $your_project_working_directory $your_project_working_directory
To merge changes from your branch into the trunk:
svn merge $your_project_working_directory <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a> <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a>
What not to do:
You should not download a released version or nightly build in a jar file and start editing.
The only time you should use a downloaded Soot jar is if you are making an extension to Soot with your own main and you do not change the Soot source at all..
Soot Release Howto
Email recent Soot contributors and ask them to add their changes to subversion and update the CHANGES file
Ensure everything is checked into subversion.
Ensure that you have the latest versions of JastAdd? etc. checked out.
• run "ant veryclean-jastadd jastadd" to make sure that the Jast-Add based files are up to date
• check in these files if they changed (in the "generated" directory)
Potentially do the same for the Jimple parser definition (use sablecc), and aso re-generate the options parser to make sure it's up to date.
Change soot.Main
• fix up dates in printed copyright statement
Change ant.settings for Soot and Jasmin, entering the correct version number
Change the soot_download.html file
• increment release number
• change the little paragraph blurb to reflect release numbers
• change all href entries to correct release numbers
• make a new entry for older releases with the most release being replaced
Change the index.html file
• latest version number and update release date
• update release status notes
• update downloads section to reflect new version number
• update the last updated date
Ensure CHANGES file, credits file, Release_Notice file are up-to-date
Ideally ensure Jasmin README and changes file are also up-to-date although they are currently hopelessly out of date
Checkin changes once all Soot contributors respond that they are set to go (or when you get tired of waiting for responses)
Build all jars
• there is a script to do this called nightly (it is also used for nightly Soot builds)
• this script requires some setup
o   make an autobuild directory (the script assumes it is in your $HOME directory but you can change the script locally to have it somewhere else)
o   adjust "rev" and "polyglotrev" variables
o   in the autobuild directory you need directories settings, resources and releases
 in the settings directory you need a soot file and a jasmin file (these files contain the ant.settings required by the build.xml script except they some variables that get set automatically by the build script)
 in the resources directory you need the stable polyglot directory of the polyglot you will be releasing with Soot
 the releases directory is where all the jars are put when they are built by the build script
You have to use SVN to modify the Soot website:  <a href="https://svn.sable.mcgill.ca/soot/website/">https://svn.sable.mcgill.ca/soot/website/</a>
You have to put all JAR files into:  <a href="https://svn.sable.mcgill.ca/www/sable/public_html/software/">https://svn.sable.mcgill.ca/www/sable/public_html/software/</a>
Put the new jars in the sable/public_html/software/ directory.
Place the updated html files in the sable/public_html/soot/. Also put the updated credit and CHANGES files there.
Build the Soot docs and update them in sable/public_html/soot/doc/ directory. There is a script that makes the javadoc search applet that needs to be run. It can be found  here.
Also copy a built version of the tutorials into sable/public_html/soot/tutorial/ directory.
To build the eclipse plugin:
• check out the folder  <a href="https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse">https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse</a>
• start eclipse with a fresh workspace and import all projects from the folder you just checked out
• In the eclipse workspace move to folder ca.mcgill.sable.lib/lib and copy the following files into this folder:
o   jasminclasses.jar
o   java_cup.jar
o   polyglot.jar
o   sootsrc.zip
• Update the version number in all plugin.xml and feature.xml files in all projects and in site.xml of the update site project.
• Open site.xml in project ca.mcgill.sable.soot.updatesite (with a double click) and click "build all". This should produce a number of jar files in the project.
• Upload the entire project folder to  <a href="http://www.sable.mcgill.ca/soot/eclipse/updates/">http://www.sable.mcgill.ca/soot/eclipse/updates/</a>
Check all links on Soot webpage
Tag the releases in subversion:
svn copy  <a href="https://svn.sable.mcgill.ca/soot/soot/trunk">https://svn.sable.mcgill.ca/soot/soot/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/soot/releases/soot-">https://svn.sable.mcgill.ca/soot/soot/releases/soot-</a> -m "Tagging the  release of the Soot project."
svn copy  <a href="https://svn.sable.mcgill.ca/soot/jasmin/trunk">https://svn.sable.mcgill.ca/soot/jasmin/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-">https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-</a> -m "Tagging the  release of the Jasmin project."
svn copy  <a href="https://svn.sable.mcgill.ca/soot/website/trunk">https://svn.sable.mcgill.ca/soot/website/trunk</a>  <a href="https://svn.sable.mcgill.ca/soot/website/releases/soot-">https://svn.sable.mcgill.ca/soot/website/releases/soot-</a> -m "Tagging the  release of the Soot project."</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">How to Build Soot maintained by <a href="https://github.com/Umar-Usman-Khan">Umar-Usman-Khan</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
