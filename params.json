{"name":"How to Build Soot","tagline":"Importing and building soot step by step","body":"How to Build and Run Soot\r\nSoot is a Java byte code analysis and transformation framework. It provides a Java API for building intermediate representations (IRs), analyses and transformations; also it supports class file annotation. Recently it has been extended to further support the analysis and transformation of Dalvik/Android bytecode.\r\ni.\tSoot using Eclipse Plug-in:\r\nUser’s always want simple interfaces and development platform for their development work. The Soot - Eclipse Plug-in integrates Soot (a Java optimization framework) with Eclipse, allowing the user’s to:\r\n\toptimize class files automatically and use more advanced optimization options\r\n\timport class files and decompile them using the Dava decompiler\r\n\tuse a Jimple editor with syntax highlighting\r\n\tview attribute information at source and IR levels\r\n\tdevelop analyses with an interactive control flow graph\r\nThis plug-in works with the Eclipse official release 3.3 (tested on 3.3.2) and should run in any of the later releases.\r\nii.\tStep by Step Instruction for Integrating Soot with Eclipse:\r\nTo Integrate SOOT with eclipse follow the simple steps given below\r\nWithin Eclipse Select:\r\n Step1:  Select Help ->  Software Updates (install new software) -> Find and Install \r\nStep2:   Select Search for new features to install -> Next ->  New Remote Site \r\nStep3:  Give the update site a name and use this site for the URL:  \r\n               [http://www.sable.mcgill.ca/soot/eclipse/updates/]\r\n               and please do not forget the trailing slash. \r\n\r\nStep4:  Select: OK -> Finish \r\n\r\nStep5: Expand the list in the Select features to install box. Check: Soot - Eclipse Plug- \r\n               in -> Next and accept the license agreement and press: Next -> Finish installing  \r\n              the plug-in. At this time the jars will download. You may be asked to accept the \r\n              unsigned jars. Press: Install and the plug-in will be installed and you will be  \r\n              asked to restart Eclipse. Press: Yes as this is usually necessary.\r\nNOTE:\r\nSelect the Soot plug-in form the list. If eclipse complains that it cannot find Draw2D or GEF, then also select Graphical Editors and Frameworks from the Eclipse Discovery Site \r\n\r\nOnce Eclipse has restarted the Soot - Eclipse plug-in will be available for use within Eclipse. \r\niii.\tWorking with Soot-eclipse Plug-in:\r\nSetting up a project so that Soot can work with it, an eclipse project should have a structure as shown on the right, where source files reside in source folders like “src” and class files go into a dedicated “bin” folder. Soot will automatically regard the project’s source path and class paths.\r\n\r\nTransforming files between different (intermediate) representations\r\nThe eclipse plug-in makes it easy to convert Java source files or bytecode files into the ‘Jimple’ or ‘Grimp’ intermediate representations, and even to convert back from those representations into source code or bytecode. Simply right-click on the .java files and then select the appropriate option for intermediate representation of your choice as shown in the figure.\r\n\r\n\r\nSootOutput\r\nSoot places the generated files into a folder “sootOutput” in the current directory. It also shows its progress in a console view. \r\n\r\nDisplaying the results of a data-flow analysis\r\nSoot can display the results of a data-flow analysis using three different kinds of tags:\r\n\tString Tag : Shows a string when you hover over the tag with your mouse\r\n\tColor Tag: Highlights the tagged Stmt or Value with a color\r\n\tLink Tag:  Lets you jump from the tagged Stmt or Value to the line of another Stmt by clicking  on the source Stmt or Value\r\nSoot displays these tags right in line with the generated code and with the source code. For instance right-click the Testclass and select Process Source File –> Run Soot…. Now select Output Options and select Jimple. Under Phase Options/Jimple Annotation Pack activate the Reaching Defs Tagger and click Run. If you now re-open Testclass.java then you should see something like shown on the right-hand side. If you like, you can add all kinds of tags in your own analysis. You can add tags to anything that implements the Host interface.\r\n\r\nExtending Soot (by Example)\r\nExtending Soot is easy and by using the plug-in we even provide concrete examples within Eclipse. Click File -> New -> Example and select one of the examples, e.g. A simple BodyTransformer. \r\nSoot will create a new Java project to host the example. Enter all necessary information for the project.\r\nEclipse will then automatically show the example file.\r\n \r\nNote that the file accesses types like PackManager which are part of the Soot library. How does the project get access to that library? The Soot plug-in automatically provides the build path variable SOOTCLASSES that points to soot’s library. For example projects, this variable is added automatically. If you want to extend Soot without using an example project you can just add the variable by yourself. (Right-click on your project and select BuildPath)\r\nAssume now that we want to apply our new BodyTransformer to the Testclass class, as before. Again, right-click on Testclass.java and select, as before:\r\nSoot -> Process Source File -> Run Soot\r\nOnly this time select the Soot Main Class tab and set the values as shown in the Figure. This advises the plug-in to start Soot by calling My Main in project MyBodyTranformer. The console view will now show that the customized BodyTransformer executed.\r\n \r\n\r\n\r\niv.\tDeveloping with Soot in Eclipse\r\nCreate Projects, Import Sources, Recognize Sources, Setup Libraries, Building, Running\r\nStep 1: Checking out Soot from SVN\r\nStart Eclipse -> Select File -> Import  Checkout Projects from SVN -> Click Next -> Select Create a new Repository Location -> Click Next -> Enter https://svn.sable.mcgill.ca/soot/soot/trunk/   -> Select the root directory and hit Finish.\r\nYou should now have a project containing Soot, but it will still have build errors. This is because Soot depends on other JAR files that you still need to check out.\r\nStep 2: Checking out Soot's dependencies\r\nSelect File -- Import -- Checkout Projects from SVN -> Click Next -> Select Create a new Repository Location -> Click Next -> Enter https://svn.sable.mcgill.ca/abc/trunk/aop/libs/  -> Select the root directory and hit Finish\r\nYou should now have a new project \"libs\" that contains a bunch of JAR files. The Soot project should now build. To run Soot, simply right-click the class soot. Main and select Run As -> Java Application. You may also want to look at the build.xml file to see how Soot is built outside of eclipse.\r\nv.\tBuilding Soot with IntelliJ IDEA   (Contributed by Konrad Jamrozik)\r\nStep1: Download IntelliJ IDEA from http://www.jetbrains.com/idea/download/\r\nStep2: Go to import project and select your .project file and click OK.\r\nStep3: Check the box with ‘keep project and module file in’ and ‘project format as ‘.idea\r\nNote: Because we are keeping the project files in .idea dir, all of them will be ignored     with \".idea\" line in .gitignore\r\n \r\n      Step4: Uncheck all projects except Soot. The unchecked projects are related to eclipse plug-in.\r\n                   Note: Build path will be broken. Java SDK probably won't be recognized and some jars          \r\n                    might be missing.\r\n\r\n      Step5: Change the module's dependencies storage format to IntelliJ IDEA, so you won't   \r\n                    modify the .classpath file\r\n                    You can easily fix the SDK by resetting it. So for this\r\n     Step6: Go to view and open module settings and Dependencies tab and select your Java version\r\n                     \r\n     Step7: Download the missing jars: \r\n                 heros.jar and jasminclasses.jar,  which are available from                  \r\n                 http://vandyk.st.informatik.tu-darmstadt.de/abc/           \r\n    \r\n                  ant.jar is available e.g. at \r\n                  http://mvnrepository.com/artifact/org.apache.ant/ant/1.9.2\r\n\r\n                   Now Put these files in ./libs_intellij so they are picked up by .gitignore\r\n                   The final dependencies should resemble\r\n              \r\nStep8: Now create Run configuration by going to Run -> edit configuration\r\n            \r\n              You have successfully import and Build soot. You can run and observe now.\r\n        \r\nvi.\tSoot Projects And Source Control\r\nIf you are modifying Soot you should be using Subversion!\r\nWhat to do:\r\nCheckout a working copy of Soot using, \r\nsvn co https://svn.sable.mcgill.ca/soot/soot/trunk $your_soot_working_directory\r\nYou should work on the trunk if your work is relatively localized. (ie: if you work mainly on one IR)\r\nYou should check in your work, after doing an svn up, very often. (ie once a week) This allows other people to help test your work and prevents potential conflicts.\r\nIf you feel your work is not localized you can work in a branch:\r\nMake a new branch,\r\nsvn cp https://svn.sable.mcgill.ca/soot/soot/trunk https://svn.sable.mcgill.ca/soot/soot/branches/$your_project\r\nCheckout a working copy of the branch,\r\nsvn co https://svn.sable.mcgill.ca/soot/soot/branches/$your_project $your_project_working_directory\r\nTo merge changes from the trunk into your branch,\r\nsvn merge https://svn.sable.mcgill.ca/soot/soot/trunk $your_project_working_directory $your_project_working_directory\r\nTo merge changes from your branch into the trunk,\r\nsvn merge $your_project_working_directory https://svn.sable.mcgill.ca/soot/soot/trunk https://svn.sable.mcgill.ca/soot/soot/trunk\r\nWhat not to do:\r\nYou should not download a released version or nightly build in a jar file and start editing.\r\nThe only time you should use a downloaded Soot jar is if you are making an extension to Soot with your own main and you do not change the Soot source at all..\r\nSoot Release How to:\r\nEmail recent Soot contributors and ask them to add their changes to subversion and update the CHANGES file\r\nEnsure everything is checked into subversion.\r\nEnsure that you have the latest versions of JastAdd? etc. checked out.\r\n•\trun \"ant veryclean-jastadd jastadd\" to make sure that the Jast-Add based files are up to date\r\n•\tcheck in these files if they changed (in the \"generated\" directory)\r\nPotentially do the same for the Jimple parser definition (use sablecc), and aso re-generate the options parser to make sure it's up to date.\r\nChange soot.Main,\r\n•\tfix up dates in printed copyright statement\r\nChange ant.settings for Soot and Jasmin, entering the correct version number\r\nChange the soot_download.html file\r\n•\tincrement release number\r\n•\tchange the little paragraph blurb to reflect release numbers\r\n•\tchange all href entries to correct release numbers\r\n•\tmake a new entry for older releases with the most release being replaced\r\nChange the index.html file\r\n•\tlatest version number and update release date\r\n•\tupdate release status notes\r\n•\tupdate downloads section to reflect new version number\r\n•\tupdate the last updated date\r\nEnsure CHANGES file, credits file, Release_Notice file are up-to-date\r\nIdeally ensure Jasmin README and changes file are also up-to-date although they are currently hopelessly out of date\r\nCheckin changes once all Soot contributors respond that they are set to go (or when you get tired of waiting for responses)\r\nBuild all jars\r\n•\tthere is a script to do this called nightly (it is also used for nightly Soot builds)\r\n•\tthis script requires some setup\r\no\tmake an autobuild directory (the script assumes it is in your $HOME directory but you can change the script locally to have it somewhere else)\r\no\tadjust \"rev\" and \"polyglotrev\" variables\r\no\tin the autobuild directory you need directories settings, resources and releases\r\n\tin the settings directory you need a soot file and a jasmin file (these files contain the ant.settings required by the build.xml script except they some variables that get set automatically by the build script)\r\n\tin the resources directory you need the stable polyglot directory of the polyglot you will be releasing with Soot\r\n\tthe releases directory is where all the jars are put when they are built by the build script\r\nYou have to use SVN to modify the Soot website:  https://svn.sable.mcgill.ca/soot/website/\r\nYou have to put all JAR files into:  https://svn.sable.mcgill.ca/www/sable/public_html/software/\r\nPut the new jars in the sable/public_html/software/ directory.\r\nPlace the updated html files in the sable/public_html/soot/. Also put the updated credit and CHANGES files there.\r\nBuild the Soot docs and update them in sable/public_html/soot/doc/ directory. There is a script that makes the javadoc search applet that needs to be run. It can be found here.\r\nAlso copy a built version of the tutorials into sable/public_html/soot/tutorial/ directory.\r\n\r\nTo build the eclipse plugin:\r\ncheck out the folder  https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse\r\n•\tstart eclipse with a fresh workspace and import all projects from the folder you just checked out\r\n•\tIn the eclipse workspace move to folder ca.mcgill.sable.lib/lib and copy the following files into this folder:\r\no\tjasminclasses.jar\r\no\tjava_cup.jar\r\no\tpolyglot.jar\r\no\tsootsrc.zip\r\n•\tUpdate the version number in all plugin.xml and feature.xml files in all projects and in site.xml of the update site project.\r\n•\tOpen site.xml in project ca.mcgill.sable.soot.updatesite (with a double click) and click \"build all\". This should produce a number of jar files in the project.\r\n•\tUpload the entire project folder to  http://www.sable.mcgill.ca/soot/eclipse/updates/\r\nCheck all links on Soot webpage\r\nTag the releases in subversion:\r\nsvn copy  https://svn.sable.mcgill.ca/soot/soot/trunk  https://svn.sable.mcgill.ca/soot/soot/releases/soot-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Soot project.\"\r\nsvn copy  https://svn.sable.mcgill.ca/soot/jasmin/trunk  https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Jasmin project.\"\r\nsvn copy  https://svn.sable.mcgill.ca/soot/website/trunk  https://svn.sable.mcgill.ca/soot/website/releases/soot-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Soot project.\"\r\n\r\nvii.\tTesting Soot   \r\n           We test Soot nightly, by building and running a few tools that use Soot internally:\r\n•\tClara is a special-purpose analysis tool built on top of the AspectBench Compiler\r\n•\tThe AspectBench Compiler is an open AspectJ compiler that uses Soot internally for weaving\r\nRunning Self Tests:\r\nTo run the tests yourself, e.g., to test whether a Patch works, please proceed as follows:\r\nCheck out and build Clara and all its dependencies. This is fairly automated, for instructions see here: http://www.bodden.de/clara/downloads/\r\nThen execute the ant script in the directory \"build\". Ant test-and-email will run all tests and results will be emailed to you.\r\nIf tests fail, you will see the output in abc-testing/ajc-harness/tests/ failed.output. There are some tests that fail regularly. You can find the current listing here:\r\nRunning test 53: \r\nnew/handle multiple nested inner classes Commandline: abc -d new -warn-unused-advice:off new/InnerHell?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at new/InnerHell?.java:12,4-13:5: No valid constructor found for javax.swing.JComponent.AccessibleJComponent(). FAIL: Test 53: \"new/handle multiple nested inner classes\" failed in 612ms, memory usage: 17787496.\r\nRunning test 115: \r\nnew/Not binding constructor when using more than one compilation Commandline: abc -d new -warn-unused-advice:off new/OuterAbstract?_PR408.java Commandline: abc -cp new:../../../clara/lib/clara-complete.jar:../../../abc/lib/abc-testing.jar -d new -warn-unused-advice:off new/ExtendsOuterAbstract?_PR408.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at new/ExtendsOuterAbstract?_PR408.java:4,8-21: Could not find type \"InnerAbstract?\". FAIL: Test 115: \"new/Not binding constructor when using more than one compilation\" failed in 1018ms, memory usage: 17848384.\r\nRunning test 165: \r\npureJava/nameConflicts/type and package name conflicts caught as errors (1) Commandline: abc -d pureJava/nameConflicts -warn-unused-advice:off pureJava/nameConflicts/p1/p2.java pureJava/nameConflicts/p1/Main1.java pureJava/nameConflicts/p1/Foo.java pureJava/nameConflicts/p1/p2/Foo.java Compilation succeeded but was expected to fail. FAIL: Test 165: \"pureJava/nameConflicts/type and package name conflicts caught as errors (1)\" failed in 669ms, memory usage: 20986784.\r\nRunning test 178: \r\npureJava/nested finally blocks have interesting frame location problems Commandline: abc -d pureJava -warn-unused-advice:off pureJava/NestedFinally?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at pureJava/NestedFinally?.java:5,18-35: Missing return statement. FAIL: Test 178: \"pureJava/nested finally blocks have interesting frame location problems\" failed in 548ms, memory usage: 8225592.\r\nRunning test 190: \r\npureJava/interfaces with non-explicitly static inner classes Commandline: abc -d pureJava -warn-unused-advice:off pureJava/InterfaceAndInnerHelper?.java Commandline: abc -cp pureJava:../../../clara/lib/clara-complete.jar:../../../abc/lib/abc-testing.jar -d pureJava -warn-unused-advice:off pureJava/InterfaceAndInner?.java Compilation produced an unexpected number of errors: 2, should be 0 Actual errors found: Semantic Error at pureJava/InterfaceAndInner?.java:7,23-48: Class \"C\" not found in scope of InterfaceAndInnerHelper? Semantic Error at pureJava/InterfaceAndInner?.java:8,34-59: Class \"C\" not found in scope of InterfaceAndInnerHelper? FAIL: Test 190: \"pureJava/interfaces with non-explicitly static inner classes\" failed in 979ms, memory usage: 15711080.\r\nRunning test 440:\r\n new/around advice on calls within inner classes (including protected method calls) 1 Commandline: abc -d new -warn-unused-advice:off new/AroundInnerCalls13.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... Outer.foo() calls Outer.Inner.mi() Outer@31c7ac55.foo calls Outer$Inner@2c0319fb.mi Outer.Inner.mi() calls PrintStream?.println(..) Outer$Inner@2c0319fb.mi calls java.io.PrintStream?@7f9ec44f.println . Outer.foo() calls Outer.InnerRandom?.nextHook(..) Outer@31c7ac55.foo calls Outer$InnerRandom?@20111326.nextHook Outer.InnerRandom?.nextHook(..) calls Outer.InnerRandom?.next(..) Outer$InnerRandom?@20111326.nextHook calls Outer$InnerRandom?@20111326.next Outer.foo() calls Outer.1.nextInt(..) Outer@31c7ac55.foo calls X.nextInt Test failed, compiled class behaved incorrectly Message: fail expected note \"Outer.InnerRandom?.nextHook(..) calls Random.next(..)\" org.aspectj.bridge.AbortException?: expected note \"Outer.InnerRandom?.nextHook(..) calls Random.next(..)\"\r\nat org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.check(Tester.java:145) at org.aspectj.testing.Tester.check(Tester.java:133) at AroundInnerCalls13.shadow$7(AroundInnerCalls13.java:7) at A.inline$1$around$942(AroundInnerCalls13.java:41) at AroundInnerCalls13.main(AroundInnerCalls13.java:5) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nFAIL: Test 440: \r\n\"new/around advice on calls within inner classes (including protected method calls) 1\" failed in 2182ms, memory usage: 15129632.\r\nRunning test 496: new/elaborated into testing of around on all join points Commandline: abc -d new -warn-unused-advice:off new/AroundAll?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... Test failed, compiled class behaved incorrectly Message: fail steps expected array of length 114 got 132 org.aspectj.bridge.AbortException?: steps expected array of length 114 got 132\r\nat org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.checkEqual(Tester.java:228) at A.checkLog(AroundAll?.java:176) at AroundAll?.shadow$8(AroundAll?.java:9) at A.inline$21$around$1600(AroundAll?.java:199) at AroundAll?.main(AroundAll?.java:198) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nFAIL: Test 496: \r\n\"new/elaborated into testing of around on all join points\" failed in 2510ms, memory usage: 14537456.\r\nRunning test 555:\r\n new/accessing protected superclass members in and outside CCC from body of method introduction Commandline: abc -d new -warn-unused-advice:off new/SuperInIntroduction?.java InvocationTargetException? while trying to run compiled class: java.lang.VerifyError?: (class: A, method: getClone signature: (LObjectSub;)LObjectSub;) Bad access to protected data java.lang.reflect.InvocationTargetException?\r\nat sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nCaused by: java.lang.VerifyError?: (class: A, method: getClone signature: (LObjectSub;)LObjectSub;) Bad access to protected data\r\nat Sub.getInt(SuperInIntroduction?.java) at SuperInIntroduction?.main(SuperInIntroduction?.java:6) ... 7 more\r\nFAIL: Test 555: \r\n\"new/accessing protected superclass members in and outside CCC from body of method introduction\" failed in 1785ms, memory usage: 12630656.\r\nRunning test 64301: \r\nabctests/new/type pattern matching for inner classes (from Ken Horn) Commandline: abc -d abctests/new -warn-unused-advice:off abctests/new/test/TypePat?.java Test failed, compiled class behaved incorrectly Message: fail expected event \"A.before2: C.foo()\" not found? org.aspectj.bridge.AbortException?: expected event \"A.before2: C.foo()\" not found?\r\nat org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.checkEqualIgnoreDups(Tester.java:702) at org.aspectj.testing.Tester.checkEqual(Tester.java:742) at org.aspectj.testing.Tester.checkEvents(Tester.java:922) at org.aspectj.testing.Tester.checkAndClearEvents(Tester.java:933) at test.TypePat?.main(TypePat?.java:42) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nFAIL: Test 64301:\r\n \"abctests/new/type pattern matching for inner classes (from Ken Horn)\" failed in 2028ms, memory usage: 14051440.\r\nRunning test 740:\r\n new/PR862/import any inner from interface implementor Commandline: abc -d new/PR862 -warn-unused-advice:off new/PR862/pack/ImportInnerFromInterfaceImplementor?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/PR862/pack/ImportInnerFromInterfaceImplementor?.class not found, skipping... Failed to find class pack.ImportInnerFromInterfaceImplementor? FAIL: Test 740: \"new/PR862/import any inner from interface implementor\" failed in 615ms, memory usage: 19799592.\r\nRunning test 752: \r\nbugs/problems with finalize call Commandline: abc -d bugs -warn-unused-advice:off bugs/Finalizer.java Compilation succeeded but was expected to fail. FAIL: Test 752: \"bugs/problems with finalize call\" failed in 652ms, memory usage: 18861512.\r\nRunning test 769: \r\nnew/illegal name binding in around cflow Commandline: abc -d new -warn-unused-advice:off new/ArgsInCflowCf?.java Compilation succeeded but was expected to fail. FAIL: Test 769: \"new/illegal name binding in around cflow\" failed in 769ms, memory usage: 14558080.\r\nRunning test 77201: \r\nabctests/bugs/declare soft and throw statements Commandline: abc -d abctests/bugs -warn-unused-advice:off abctests/bugs/ConvertToUnchecked?.java Compilation produced an unexpected number of errors: 1, should be 0 Actual errors found: Semantic Error at abctests/bugs/ConvertToUnchecked?.java:44,2-11: The exception java.io.IOException must be either caught or declared to be thrown FAIL: Test 77201: \"abctests/bugs/declare soft and throw statements\" failed in 704ms, memory usage: 21795528.\r\nRunning test 792: \r\nnew/arrays via Class.forName() Commandline: abc -d new -warn-unused-advice:off new/ClassForName?.java File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... execution(void ClassForName?.main(ClassNotFoundException?)) File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc-harness/tests/new/[Ljava/lang/String;.class not found, skipping... InvocationTargetException? while trying to run compiled class: java.lang.ClassNotFoundException?: [Ljava.lang.String; java.lang.reflect.InvocationTargetException?\r\nat sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nCaused by: java.lang.ClassNotFoundException?: [Ljava.lang.String;\r\nat java.lang.ClassLoader?.findClass(ClassLoader?.java:373) at abc.testing.TestCase?$FileClassLoader?.findClass(TestCase?.java:794) at java.lang.ClassLoader?.loadClass(ClassLoader?.java:321) at java.lang.ClassLoader?.loadClass(ClassLoader?.java:266) at ClassForName?.main(ClassForName?.java:9) ... 7 more\r\nFAIL: Test 792:\r\n \"new/arrays via Class.forName()\" failed in 1156ms, memory usage: 14452424.\r\nRunning test 812: \r\nharness/CLE: no dir specified for sourceroots Commandline: abc -d harness -warn-unused-advice:off -sourceroots harness/ErrorTest?.java Unexpected exception while compiling: polyglot.util.InternalCompilerError?: unhandled exception during compilation polyglot.util.InternalCompilerError?: unhandled exception during compilation\r\nat abc.main.Main.run(Main.java:454) at abc.testing.TestCase?.runTest(TestCase?.java:289) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nCaused by: java.lang.IllegalArgumentException?: Sourceroot harness/ErrorTest?.java is not a directory\r\nat abc.main.Main.findSourcesInDir(Main.java:587) at abc.main.Main.loadSourceRoots(Main.java:604) at abc.main.Main.run(Main.java:398) ... 3 more\r\nFAIL: Test 812: \r\n\"harness/CLE: no dir specified for sourceroots\" failed in 655ms, memory usage: 31243840.\r\nRunning test 951: \r\nbugs/deprecated/-deprecation not working? Commandline: abc -d bugs/deprecated -warn-unused-advice:off -deprecation bugs/deprecated/Deprecation.java bugs/deprecated/Deprecated.java Illegal arguments: Unknown option -deprecation FAIL: Test 951: \"bugs/deprecated/-deprecation not working?\" failed in 208ms, memory usage: 12396600.\r\nRunning test 986: \r\nabctests/bugs/Matching int.clone()\" failed in 574ms, memory usage: 18563536.\r\nRunning test 992:\r\n abctests/bugs/cast pointcut can interact badly with jimple type assignment Commandline: abc -d abctests/bugs -injars abctests/bugs/cast.jar -warn-unused-advice:off -ext abc.eaj abctests/bugs/CastAspect?.java Test failed, compiled class behaved incorrectly Message: fail unexpected event \"cast happened\" found? org.aspectj.bridge.AbortException?: unexpected event \"cast happened\" found?\r\nat org.aspectj.bridge.MessageWriter?.handleMessage(MessageWriter?.java:47) at org.aspectj.testing.Tester.handle(Tester.java:963) at org.aspectj.testing.Tester.checkFailed(Tester.java:177) at org.aspectj.testing.Tester.check(Tester.java:204) at org.aspectj.testing.Tester.checkEqualIgnoreDups(Tester.java:702) at org.aspectj.testing.Tester.checkEqual(Tester.java:742) at org.aspectj.testing.Tester.checkEvents(Tester.java:922) at org.aspectj.testing.Tester.checkAndClearEvents(Tester.java:933) at org.aspectj.testing.Tester.checkAllEvents(Tester.java:846) at Cast.main(Cast.java:5) at sun.reflect.NativeMethodAccessorImpl?.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl?.invoke(NativeMethodAccessorImpl?.java:57) at sun.reflect.DelegatingMethodAccessorImpl?.invoke(DelegatingMethodAccessorImpl?.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at abc.testing.TestCase?.runTest(TestCase?.java:413) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nFAIL: Test 992:\r\n \"abctests/bugs/cast pointcut can interact badly with jimple type assignment\" failed in 2435ms, memory usage: 13731280.\r\nRunning test 1001: \r\nabctests/bugs/resolving anonymous classes inside classes with dollar signs Commandline: abc -d abctests/bugs -warn-unused-advice:off abctests/bugs/ExtraAnon?.java Unexpected exception while compiling: polyglot.util.InternalCompilerError?: unhandled exception during compilation polyglot.util.InternalCompilerError?: unhandled exception during compilation\r\nat abc.main.CompileSequence?.runSequence(CompileSequence?.java:110) at abc.main.Main.run(Main.java:406) at abc.testing.TestCase?.runTest(TestCase?.java:289) at abc.testing.Main.doCase(Main.java:288) at abc.testing.Main.main(Main.java:122)\r\nCaused by: java.lang.RuntimeException?: couldn't find class: E$A2$1 (is your soot-class-path set properly?)\r\nat soot.SootResolver?.bringToHierarchy(SootResolver?.java:205) at soot.SootResolver?.bringToSignatures(SootResolver?.java:239) at soot.SootResolver?.processResolveWorklist(SootResolver?.java:154) at soot.SootResolver?.resolveClass(SootResolver?.java:124) at soot.Scene.loadClass(Scene.java:448) at abc.main.CompileSequence?.compile(CompileSequence?.java:338) at abc.main.CompileSequence?.runSequence(CompileSequence?.java:100) ... 4 more\r\nFAIL: Test 1001:\r\n \"abctests/bugs/resolving anonymous classes inside classes with dollar signs\" failed in 695ms, memory usage: 35964696.\r\nRunning test 1032: \r\nabctests/tracematches/Tracematches: Testing self-applying around TM-advice Commandline: abc -d abctests/tracematches -warn-unused-advice:off -ext abc.tm abctests/tracematches/AdviseSelf?.java Compilation produced unexpected warnings:\r\nWarning at Compiler Generated: Invalid Jimple body for <AdviseSelfTM: void tracematch$3119$body_real(AdviseSelf?,java.lang.Integer,Abc$proceed$AdviseSelfTM$tracematch$3119$body,int,int,int,java.lang.Object,java.lang.Object,java.lang.Object[],int)>\r\nAll identity statements should occur at the start of a Jimple method.abc will try to fix this, but really it's a bug in code generation. \r\nFAIL: Test 1032:\r\n \"abctests/tracematches/Tracematches: Testing self-applying around TM-advice\" failed in 1122ms, memory usage: 24447656.\r\nRunning test 1208: \r\nabctests/bugs/inpath/Class being woven twice when using -inpath Commandline: abc -d abctests/bugs/inpath -warn-unused-advice:off File /mnt/sdb1/var/lib/jenkins/jobs/ABC/workspace/abc-testing/ajc harness/tests/abctests/bugs/inpath/Test.class not found, skipping... Failed to find class Test FAIL: Test 1208: \"abctests/bugs/inpath/Class being woven twice when using -inpath\" failed in 522ms, memory usage: 14993544.\r\nBasic Svn Commands\r\nsvn up  (update your working copy - you should do this before committing anything)\r\nsvn commit  (commit your changes)\r\nsvn add  (add new files that you've created)\r\nsvn rm  (remove files no longer needed)\r\nsvn stat  (lists all files and whether they are M - modified / A - added/ C - in conflict/ ? - status   unknown)\r\nsvn revert  (changes your local file back to whatever is in the repository)\r\nsvn log (lists changes log file)\r\nsvn resolved  (after you fix a conflict you need to use this on the file before you can commit)\r\nSoot Projects And Source Control\r\nIf you are modifying Soot you should be using Subversion!\r\nWhat to do:\r\nCheckout a working copy of Soot using svn co https://svn.sable.mcgill.ca/soot/soot/trunk $your_soot_working_directory\r\nYou should work on the trunk if your work is relatively localized. (ie: if you work mainly on one IR)\r\nYou should check in your work, after doing an svn up, very often. (ie once a week) This allows other people to help test your work and prevents potential conflicts.\r\nIf you feel your work is not localized you can work in a branch:\r\nMake a new branch:\r\nsvn cp https://svn.sable.mcgill.ca/soot/soot/trunk https://svn.sable.mcgill.ca/soot/soot/branches/$your_project\r\nCheckout a working copy of the branch:\r\nsvn co https://svn.sable.mcgill.ca/soot/soot/branches/$your_project $your_project_working_directory\r\nTo merge changes from the trunk into your branch:\r\nsvn merge https://svn.sable.mcgill.ca/soot/soot/trunk $your_project_working_directory $your_project_working_directory\r\nTo merge changes from your branch into the trunk:\r\nsvn merge $your_project_working_directory https://svn.sable.mcgill.ca/soot/soot/trunk https://svn.sable.mcgill.ca/soot/soot/trunk\r\nWhat not to do:\r\nYou should not download a released version or nightly build in a jar file and start editing.\r\nThe only time you should use a downloaded Soot jar is if you are making an extension to Soot with your own main and you do not change the Soot source at all..\r\nSoot Release Howto\r\nEmail recent Soot contributors and ask them to add their changes to subversion and update the CHANGES file\r\nEnsure everything is checked into subversion.\r\nEnsure that you have the latest versions of JastAdd? etc. checked out.\r\n•\trun \"ant veryclean-jastadd jastadd\" to make sure that the Jast-Add based files are up to date\r\n•\tcheck in these files if they changed (in the \"generated\" directory)\r\nPotentially do the same for the Jimple parser definition (use sablecc), and aso re-generate the options parser to make sure it's up to date.\r\nChange soot.Main\r\n•\tfix up dates in printed copyright statement\r\nChange ant.settings for Soot and Jasmin, entering the correct version number\r\nChange the soot_download.html file\r\n•\tincrement release number\r\n•\tchange the little paragraph blurb to reflect release numbers\r\n•\tchange all href entries to correct release numbers\r\n•\tmake a new entry for older releases with the most release being replaced\r\nChange the index.html file\r\n•\tlatest version number and update release date\r\n•\tupdate release status notes\r\n•\tupdate downloads section to reflect new version number\r\n•\tupdate the last updated date\r\nEnsure CHANGES file, credits file, Release_Notice file are up-to-date\r\nIdeally ensure Jasmin README and changes file are also up-to-date although they are currently hopelessly out of date\r\nCheckin changes once all Soot contributors respond that they are set to go (or when you get tired of waiting for responses)\r\nBuild all jars\r\n•\tthere is a script to do this called nightly (it is also used for nightly Soot builds)\r\n•\tthis script requires some setup\r\no\tmake an autobuild directory (the script assumes it is in your $HOME directory but you can change the script locally to have it somewhere else)\r\no\tadjust \"rev\" and \"polyglotrev\" variables\r\no\tin the autobuild directory you need directories settings, resources and releases\r\n\tin the settings directory you need a soot file and a jasmin file (these files contain the ant.settings required by the build.xml script except they some variables that get set automatically by the build script)\r\n\tin the resources directory you need the stable polyglot directory of the polyglot you will be releasing with Soot\r\n\tthe releases directory is where all the jars are put when they are built by the build script\r\nYou have to use SVN to modify the Soot website:  https://svn.sable.mcgill.ca/soot/website/\r\nYou have to put all JAR files into:  https://svn.sable.mcgill.ca/www/sable/public_html/software/\r\nPut the new jars in the sable/public_html/software/ directory.\r\nPlace the updated html files in the sable/public_html/soot/. Also put the updated credit and CHANGES files there.\r\nBuild the Soot docs and update them in sable/public_html/soot/doc/ directory. There is a script that makes the javadoc search applet that needs to be run. It can be found  here.\r\nAlso copy a built version of the tutorials into sable/public_html/soot/tutorial/ directory.\r\nTo build the eclipse plugin:\r\n•\tcheck out the folder  https://svn.sable.mcgill.ca/soot/soot/trunk/eclipse\r\n•\tstart eclipse with a fresh workspace and import all projects from the folder you just checked out\r\n•\tIn the eclipse workspace move to folder ca.mcgill.sable.lib/lib and copy the following files into this folder:\r\no\tjasminclasses.jar\r\no\tjava_cup.jar\r\no\tpolyglot.jar\r\no\tsootsrc.zip\r\n•\tUpdate the version number in all plugin.xml and feature.xml files in all projects and in site.xml of the update site project.\r\n•\tOpen site.xml in project ca.mcgill.sable.soot.updatesite (with a double click) and click \"build all\". This should produce a number of jar files in the project.\r\n•\tUpload the entire project folder to  http://www.sable.mcgill.ca/soot/eclipse/updates/\r\nCheck all links on Soot webpage\r\nTag the releases in subversion:\r\nsvn copy  https://svn.sable.mcgill.ca/soot/soot/trunk  https://svn.sable.mcgill.ca/soot/soot/releases/soot-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Soot project.\"\r\nsvn copy  https://svn.sable.mcgill.ca/soot/jasmin/trunk  https://svn.sable.mcgill.ca/soot/jasmin/releases/jasmin-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Jasmin project.\"\r\nsvn copy  https://svn.sable.mcgill.ca/soot/website/trunk  https://svn.sable.mcgill.ca/soot/website/releases/soot-<RELEASE_NUMBER> -m \"Tagging the <RELEASE_NUMBER> release of the Soot project.\"\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}